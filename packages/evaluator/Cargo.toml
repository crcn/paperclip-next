[package]
name = "paperclip-evaluator"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true

[features]
default = []
async = ["tokio"]
preview = ["async", "dep:warp", "dep:futures-util", "dep:notify"]

[dependencies]
paperclip-parser = { path = "../parser" }
paperclip-semantics = { path = "../semantics" }
paperclip-bundle = { path = "../bundle" }
serde.workspace = true
serde_json.workspace = true
thiserror.workspace = true
tracing.workspace = true
prost = "0.13"
tokio = { workspace = true, optional = true }
warp = { version = "0.3", optional = true }
futures-util = { version = "0.3", optional = true }
notify = { version = "6.0", optional = true }

[build-dependencies]
tonic-build = "0.12"

[dev-dependencies]
criterion.workspace = true

[[bench]]
name = "evaluator_bench"
harness = false

[[bin]]
name = "preview_server"
path = "src/bin/preview_server.rs"
required-features = ["preview"]
